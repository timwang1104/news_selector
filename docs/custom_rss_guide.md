# 自定义RSS订阅功能使用指南

## 功能概述

自定义RSS订阅功能允许用户在不依赖Inoreader API的情况下，直接添加和管理RSS订阅源。这个功能特别适用于：

- Inoreader API请求次数限制时的备用方案
- 管理私有或内部RSS源
- 需要更灵活的RSS源管理

## 主要特性

### 1. RSS订阅源管理
- ✅ 添加RSS订阅源（支持RSS/Atom格式）
- ✅ 删除订阅源
- ✅ 按分类组织订阅源
- ✅ 激活/停用订阅源
- ✅ 本地存储订阅配置

### 2. 文章获取与管理
- ✅ 自动解析RSS内容
- ✅ 提取文章标题、内容、发布时间等信息
- ✅ 支持已读/未读状态管理
- ✅ 支持文章星标功能
- ✅ 按时间、分类过滤文章

### 3. 界面功能
- ✅ 独立的RSS管理标签页
- ✅ 直观的订阅源列表
- ✅ 文章列表展示
- ✅ 双击打开原文链接
- ✅ 批量刷新功能

## 使用方法

### 1. 启动应用

```bash
python gui.py
```

### 2. 访问RSS功能

在主界面左侧的"订阅源管理"区域，点击"自定义RSS"标签页即可进入RSS管理界面。

### 3. 添加RSS订阅源

1. 点击"添加RSS"按钮
2. 在弹出的对话框中输入RSS URL
3. 设置分类（可选，默认为"默认"）
4. 点击"确定"

**支持的RSS格式：**
- RSS 2.0
- RSS 1.0
- Atom

**示例RSS源：**
- BBC新闻：`https://feeds.bbci.co.uk/news/rss.xml`
- CNN：`https://rss.cnn.com/rss/edition.rss`
- 路透社：`https://feeds.reuters.com/reuters/topNews`

### 4. 管理订阅源

#### 查看订阅源
- 左侧面板显示所有订阅源
- 显示标题、分类、未读数量、状态

#### 刷新订阅源
- **刷新选中**：刷新当前选中的订阅源
- **全部刷新**：刷新所有激活的订阅源

#### 删除订阅源
1. 选中要删除的订阅源
2. 点击"删除"按钮
3. 确认删除

### 5. 阅读文章

#### 查看文章列表
- 右侧面板显示文章列表
- 显示标题、来源、发布时间、状态

#### 过滤文章
- **按分类过滤**：选择特定分类的文章
- **仅未读**：只显示未读文章
- **按时间过滤**：显示指定时间范围内的文章

#### 阅读文章
- 双击文章标题打开原文链接
- 文章会自动标记为已读

## 技术实现

### 架构设计

```
src/
├── models/rss.py              # RSS数据模型
├── services/
│   ├── rss_service.py         # RSS解析服务
│   └── custom_rss_service.py  # RSS订阅管理服务
└── gui/
    └── rss_manager.py         # RSS管理界面
```

### 数据存储

- 订阅配置存储在：`~/.news_selector/rss_subscriptions.json`
- 支持导入/导出配置
- 自动备份机制

### RSS解析

使用`feedparser`库进行RSS解析，支持：
- 自动检测RSS格式
- 容错解析
- 内容清理和格式化

## 配置选项

### 订阅源配置

每个订阅源支持以下配置：

```python
{
    "url": "RSS源URL",
    "title": "订阅源标题",
    "category": "分类",
    "is_active": true,           # 是否激活
    "fetch_interval": 3600,      # 刷新间隔（秒）
    "added_time": "添加时间",
    "last_fetched": "最后刷新时间"
}
```

### 全局配置

- 默认刷新间隔：1小时
- 最大文章保留数：每个源100篇
- 网络请求超时：30秒

## 故障排除

### 常见问题

1. **RSS源添加失败**
   - 检查URL是否正确
   - 确认RSS源是否可访问
   - 检查网络连接

2. **文章获取失败**
   - 检查RSS源是否仍然有效
   - 尝试手动刷新
   - 查看错误日志

3. **界面显示异常**
   - 重启应用
   - 检查配置文件是否损坏
   - 清除缓存

### 日志查看

应用日志包含详细的错误信息，可以帮助诊断问题。

## 最佳实践

### 1. 订阅源管理
- 使用有意义的分类名称
- 定期清理无效的订阅源
- 避免添加过多订阅源影响性能

### 2. 性能优化
- 合理设置刷新间隔
- 使用分类过滤减少显示的文章数量
- 定期清理旧文章

### 3. 数据安全
- 定期备份订阅配置
- 避免在公共网络上添加敏感RSS源

## 扩展功能

### 计划中的功能
- [ ] RSS源导入/导出
- [ ] 文章全文抓取
- [ ] 关键词过滤
- [ ] 自动分类
- [ ] 离线阅读

### 自定义开发

如需扩展功能，可以：
1. 继承`CustomRSSService`类
2. 扩展`RSSManager`界面
3. 添加新的数据模型

## 技术支持

如遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查应用日志
3. 提交Issue到项目仓库
