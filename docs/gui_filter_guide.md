# GUI筛选功能使用指南

## 概述

新闻订阅工具的图形界面现已集成智能筛选功能，支持基于关键词和AI的新闻文章筛选，帮助用户快速找到最相关的国际科技政策新闻。

## 功能特性

### 🎯 智能筛选
- **关键词筛选**: 基于预定义的国际科技关键词库进行文章筛选
- **AI筛选**: 使用大语言模型对文章进行智能评估
- **组合筛选**: 结合关键词和AI筛选的优势，提供最佳筛选效果

### 📊 可视化显示
- **筛选分数**: 在文章列表中显示每篇文章的筛选分数
- **筛选标记**: 清晰标识筛选后的文章
- **详细结果**: 显示匹配关键词、AI评分等详细信息

### ⚙️ 配置管理
- **灵活配置**: 支持调整筛选阈值、关键词权重等参数
- **多种模式**: 支持仅关键词、仅AI、组合筛选三种模式
- **性能监控**: 实时显示筛选性能指标和统计信息

## 使用方法

### 1. 启动应用

```bash
python gui.py
```

### 2. 访问筛选功能

#### 方法一：使用菜单栏
1. 点击菜单栏中的 **"筛选"** 菜单
2. 选择相应的功能：
   - **智能筛选**: 对当前文章执行筛选
   - **筛选配置**: 调整筛选参数
   - **性能指标**: 查看筛选性能统计

#### 方法二：使用工具栏
1. 在文章列表页面的工具栏中
2. 选择筛选类型（关键词/AI/组合）
3. 点击 **"智能筛选"** 按钮
4. 使用 **"显示全部"** 按钮恢复显示所有文章

### 3. 筛选流程

#### 步骤1：加载文章
- 使用 **"刷新新闻"** 或选择特定订阅源加载文章
- 确保有文章数据可供筛选

#### 步骤2：选择筛选类型
- **keyword**: 仅使用关键词筛选（速度快）
- **ai**: 仅使用AI筛选（精度高，需要API配置）
- **chain**: 组合筛选（推荐，平衡速度和精度）

#### 步骤3：执行筛选
- 点击 **"智能筛选"** 按钮
- 观察进度对话框显示筛选过程
- 等待筛选完成

#### 步骤4：查看结果
- 筛选后的文章会在列表中显示
- 每篇文章显示筛选分数
- 可查看详细的筛选结果报告

## 界面说明

### 文章列表增强

| 列名 | 说明 |
|------|------|
| 标题 | 文章标题 |
| 来源 | 订阅源名称 |
| 时间 | 发布时间 |
| 状态 | 阅读状态，筛选后显示[筛选]标记 |
| 筛选分数 | 文章的筛选分数（0.000-1.000） |

### 工具栏功能

| 按钮/选项 | 功能 |
|-----------|------|
| 智能筛选 | 执行智能筛选 |
| 显示全部 | 恢复显示所有文章 |
| 类型选择 | 选择筛选类型（keyword/ai/chain） |

### 筛选配置对话框

#### 关键词筛选配置
- **筛选阈值**: 控制筛选的严格程度（0.0-1.0）
- **最大结果数**: 限制筛选结果的数量
- **最少匹配关键词数**: 要求的最少关键词匹配数
- **高级选项**: 大小写敏感、模糊匹配、单词边界检查等

#### AI筛选配置
- **API设置**: OpenAI API Key、模型名称、Base URL
- **筛选参数**: AI评分阈值、最大请求数
- **性能选项**: 缓存设置、降级策略

#### 筛选链配置
- **流程控制**: 启用/禁用各筛选步骤
- **结果设置**: 最终分数阈值、排序方式
- **数量限制**: 各阶段的结果数量限制

## 筛选结果解读

### 筛选分数说明
- **1.000**: 完美匹配，高度相关
- **0.800-0.999**: 高度相关
- **0.650-0.799**: 中等相关（默认阈值以上）
- **0.500-0.649**: 低度相关
- **< 0.500**: 不相关（被过滤）

### 详细结果信息
- **关键词分数**: 基于关键词匹配的相关性分数
- **匹配关键词**: 文章中匹配到的关键词列表
- **AI评分**: AI模型给出的综合评分（0-30分）
- **评分详情**: 政策相关性、创新影响、实用性三个维度的分数
- **最终分数**: 综合关键词和AI评分的最终分数

## 性能优化

### 缓存机制
- AI筛选结果会自动缓存，避免重复请求
- 缓存有效期默认1小时
- 可在配置中调整缓存设置

### 批处理
- 支持批量处理文章，提高效率
- 自动调整批次大小以平衡性能和响应性

### 降级策略
- AI服务不可用时自动降级到关键词筛选
- 确保筛选功能的可靠性

## 故障排除

### 常见问题

#### Q: 筛选结果为空
A: 检查以下设置：
- 筛选阈值是否过高
- 最少匹配关键词数是否合理
- 文章内容是否包含相关关键词

#### Q: AI筛选失败
A: 检查以下配置：
- OpenAI API Key是否正确配置
- 网络连接是否正常
- API配额是否充足
- 是否启用了降级策略

#### Q: 筛选速度慢
A: 优化建议：
- 减少AI筛选的最大请求数
- 启用缓存功能
- 使用关键词筛选预过滤
- 调整批处理大小

#### Q: 界面显示异常
A: 解决方法：
- 重启应用
- 检查文章数据是否正常加载
- 确认筛选配置是否有效

### 日志和调试
- 查看控制台输出获取详细错误信息
- 使用性能指标监控筛选效果
- 检查筛选配置是否合理

## 最佳实践

### 筛选策略
1. **首次使用**: 建议使用默认配置的组合筛选
2. **大量文章**: 先用关键词筛选预过滤，再用AI精筛
3. **精确筛选**: 提高筛选阈值，减少结果数量
4. **广泛筛选**: 降低筛选阈值，增加结果覆盖

### 配置建议
- **关键词阈值**: 0.65（平衡精度和召回率）
- **AI阈值**: 20分（满分30分的2/3）
- **最终阈值**: 0.7（确保高质量结果）
- **缓存设置**: 启用缓存以提高性能

### 使用技巧
- 定期查看性能指标，优化配置
- 根据实际需求调整各类阈值
- 利用筛选结果详情了解筛选逻辑
- 合理使用降级策略确保可用性

## 技术说明

### 关键词库
- 基于国际科技政策领域的专业词汇
- 包含AI技术、量子计算、生物技术等8个主要分类
- 支持英文关键词匹配和分类权重

### AI评估
- 使用GPT模型进行智能评估
- 从政策相关性、创新影响、实用性三个维度评分
- 支持批量评估以提高效率

### 数据安全
- API Key等敏感信息本地存储
- 不会上传用户的文章内容到第三方
- 支持自定义API服务地址
